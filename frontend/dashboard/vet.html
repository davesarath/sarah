<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pet Care Management - Vet Dashboard</title>
 
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body {
      background: url("assets/img/img1/medi.jpg");
    
      font-family: Arial, sans-serif;
    }
    .navbar {
      background-color: #198754; 
    }
    .navbar-brand, .nav-link, .dropdown-toggle {
      color: #fff !important;
    }
    .card {
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

  
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#"><i class="bi bi-heart-pulse-fill"></i> VetCare</a>
      <div class="ms-auto">
        <div class="dropdown">
          <a class="dropdown-toggle nav-link" href="#" role="button" data-bs-toggle="dropdown">
            <i class="bi bi-person-badge-fill"></i> Veterinarian
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="/profile">Profile</a></li>
            <li><a class="dropdown-item" href="/logout">Logout</a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  
  <div class="container mt-4">
    <h2 class="mb-4">Welcome,  {{ session['full_name'] }} üë©‚öïÔ∏è</h2>

    
    <div class="row g-4">
      <div class="col-md-4">
        <div class="card text-center p-3">
          <i class="bi bi-calendar-check text-success" style="font-size: 2rem;"></i>
          <h5 class="mt-2">Appointments</h5>
          <p class="text-muted">{{ today_appointments|length }} Today</p>
          <a href="/appointments" class="btn btn-success btn-sm">View Appointments</a>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card text-center p-3">
          <i class="bi bi-file-medical text-primary" style="font-size: 2rem;"></i>
          <h5 class="mt-2">Medical Records</h5>
          <p class="text-muted">Update Pet History</p>
          <a href="/medications" class="btn btn-success btn-sm">Manage Records</a>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card text-center p-3">
          <i class="bi bi-bell-fill text-warning" style="font-size: 2rem;"></i>
          <h5 class="mt-2">Reminders</h5>
          <p class="text-muted">2 Vaccinations Due</p>
          <a href="/vaccinations" class="btn btn-success btn-sm">Check Reminders</a>
        </div>
      </div>
    </div>

    
    <div class="mt-5">
      <h4>Today's Appointments</h4>
      <div class="card p-3 mt-3">
        <table class="table table-hover">
          <thead class="table-success">
            <tr>
              <th>Time</th>
              <th>Pet</th>
              <th>Owner</th>
              <th>Reason</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for appointment in today_appointments %}
            <tr>
              <td>{{ appointment.appointment_time }}</td>
              <td>{{ appointment.pet_name }}</td>
              <td>{{ appointment.owner_name }}</td>
              <td>
                <span class="badge bg-{{ 'warning' if appointment.status == 'Pending' else 'info' if appointment.status == 'Confirmed' else 'success' }}">{{ appointment.status }}</span>
              </td>
              <td>
                <a href="/pet_medical/{{ appointment.pet_id }}" class="btn btn-outline-success btn-sm">View</a>
                {% if appointment.status == 'Pending' %}
                <button class="btn btn-info btn-sm" onclick="updateStatus({{ appointment.appointment_id }}, 'Confirmed')">Confirm</button>
                {% elif appointment.status == 'Confirmed' %}
                <button class="btn btn-success btn-sm" onclick="updateStatus({{ appointment.appointment_id }}, 'Completed')">Complete</button>
                {% endif %}
              </td>
            </tr>
            {% endfor %}
            {% if not today_appointments %}
            <tr>
              <td colspan="5" class="text-center text-muted">No appointments scheduled for today</td>
            </tr>
            {% endif %}
          </tbody>
        </table>
      </div>
    </div>

    
    <div class="mt-5">
      <h4>Recent Activities</h4>
      <div class="card p-3 mt-3">
        <ul class="list-group list-group-flush">
          {% for activity in recent_activities %}
          <li class="list-group-item">
            {{ activity.activity_type }}: <strong>{{ activity.details }}</strong> for {{ activity.pet_name }} on <b>{{ activity.activity_date }}</b>
          </li>
          {% endfor %}
          {% if not recent_activities %}
          <li class="list-group-item text-muted">No recent activities found.</li>
          {% endif %}
        </ul>
      </div>
    </div>
  </div>
  <footer class="bg-light text-center text-dark border-top mt-5 py-3">
    <div class="container">
      <p class="mb-1">
        <strong>Contact Us:</strong> 
        <a href="mailto:support@petcare.com" class="text-decoration-none text-primary">support@petcare.com</a> |
        <a href="tel:+919876543210" class="text-decoration-none text-primary">+91 98765 43210</a>
      </p>
      <p class="small mb-0 text-muted">&copy; 2025 Pet Care Management System. All rights reserved.</p>
    </div>
  </footer>
  
  <script>
    function updateStatus(appointmentId, status) {
      if (confirm(`Mark appointment as ${status}?`)) {
        fetch('/update_appointment_status', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ 
            appointment_id: appointmentId, 
            status: status 
          })
        })
        .then(response => response.json())
        .then(data => {
          alert(data.message);
          if (data.success) {
            location.reload();
          }
        })
        .catch(error => {
          console.error('Error:', error);
          alert('An error occurred while updating the appointment.');
        });
      }
    }
  </script>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>