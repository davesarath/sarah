{% extends "layouts/owner_base.html" %}

{% block title %}Pet Care Management - Owner Dashboard{% endblock %}

{% block page_title %}Welcome, {{ session['full_name'] }} ðŸ‘‹{% endblock %}

{% block content %}
<div class="row g-4">
  <div class="col-md-4">
    <div class="card text-center p-3">
      <i class="bi bi-heart-fill text-danger" style="font-size: 2rem;"></i>
      <h5 class="mt-2">My Pets</h5>
      <p class="text-muted">{{pets|length}} Active Pets</p>
      <a href="/managepets" class="btn btn-primary btn-sm">View Pets</a>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card text-center p-3">
      <i class="bi bi-calendar-event text-success" style="font-size: 2rem;"></i>
      <h5 class="mt-2">Appointments</h5>
      <p class="text-muted">2 Upcoming</p>
      <a href="/appointments" class="btn btn-primary btn-sm">Book Appointment</a>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card text-center p-3">
      <i class="bi bi-bell-fill text-warning" style="font-size: 2rem;"></i>
      <h5 class="mt-2">Reminders</h5>
      <p class="text-muted">{{ upcoming_reminders|length }} Upcoming</p>
      <a href="notifications/upcoming" class="btn btn-primary btn-sm">View Reminders</a>
    </div>
  </div>
</div>

{% if pets|length > 0 %}
<div class="mt-5">
  <h4>My Pets</h4>
  <div class="row g-4 mt-2">
      {% for objPet in pets %}
      <div class="col-md-4">
        <div class="card p-3">
          <img src="/static/{{ objPet.image }}" 
          onerror="this.onerror=null;this.src='/assets/images/placeholderpet.jpg';" 
          class="card-img-top rounded" alt="Dog" style="height: 300px; object-fit:cover;">
          <div class="card-body">
            <h5 class="card-title"> {{objPet.name }} </h5>
            <p class="card-text"> {{objPet.breed }} ,  {{objPet.age }}  years old</p>
            <a href="/managepets/{{objPet.pet_id}}" class="btn btn-outline-primary btn-sm">View Details</a>
          </div>
        </div>
      </div>
      {% endfor %}
  </div>
</div>
{% endif %}

<div class="mt-5">
  <h4>Upcoming Reminders</h4>
  <div class="card p-3 mt-3">
    {% if upcoming_reminders|length > 0 %}
    <ul class="list-group list-group-flush">
      {% for reminder in upcoming_reminders %}
      <li class="list-group-item">
        <i class="bi bi-{{ 'shield-check' if reminder.reminder_type == 'Vaccination' else 'capsule' }} text-{{ 'success' if reminder.reminder_type == 'Vaccination' else 'primary' }}"></i>
        {{ reminder.pet_name }}'s {{ reminder.reminder_type.lower() }} ({{ reminder.details }}) due on <b>{{ reminder.reminder_date.strftime('%d %b %Y') }}</b>
      </li>
      {% endfor %}
    </ul>
    {% else %}
    <p class="text-muted mb-0">No upcoming reminders for your pets.</p>
    {% endif %}
  </div>
</div>
{% endblock %}